	APS Técnicas de Projeto
	O tema proposto do artigo em questão é o desenvolvimento de firewall com hardwares de baixo desempenho e fácil configuração, para iniciar o artigo antes de saber como implementar e configurar um firewall, antes de mesmo de pensar em qual hardware utilizar devemos responder a certas questões, para que serve? Essa é uma questão simples de responder para profissionais da área, porém para o usuário final pode ser uma pergunta difícil de ser respondida, mas é bem simples, os firewalls servem para proteger seus dados e informações enquanto utiliza sistemas de comunicação um exemplo desse sistema e o mais conhecido é a internet. 
	Outra questão que deve ser respondida é, o que é um sistema de comunicação? De acordo com MORAES (2010), um sistema de comunicação é um conjunto de mecanismos que permite que uma informação seja transportada através de um meio desde sua origem até o seu destino. Na internet ocorrem trocas constantes de informações e acessos à outros computadores e servidores, porém para essa comunicação acontecer é necessário que você permita a conexão entre os computadores e nesse processo pode existir criminosos digitais que são pessoas mal intencionadas querendo roubar suas informações e dados, por isso se faz importante o uso de uma proteção para filtrar os acessos a sua máquina e protegendo assim suas informações. 
	O Anderson Petry(Autor em questão) guiou o estudo de seu artigo para desenvolver um sistema de firewall doméstico que não necessite de um grande desempenho de Hardware e que seja suficiente para suprir as necessidades de acesso garantindo a confiabilidade dos conteúdos que serão acessados melhorando a qualidade desses acessos aos conteúdos que devem ou não ser acessados na internet.
A metodologia que ele utilizará para realizar essas tarefas são: analisar diferentes Sistemas Operacionais para trabalhar com a versão que exige menos recursos de hardware; trabalhar com ferramentas, tais como IPTables e Cron, com a finalidade de elaborar um sistema de Firewall que satisfaça às necessidades dos usuários; escolher ou elaborar uma interface que seja amigável, de fácil configuração por parte do usuário; testar essas funcionalidades e eficiência da ferramenta de firewall desenvolvida analisando se está de acordo com o proposto.
	Soluções propostas, para elaboração desta aplicação foi necessária a pesquisa sobre um sistema operacional, onde os quesitos para escolha do autor foram o baixo consumo de hardware e de fácil utilização. O sistema operacional precisaria suportar o hardware disponível, possuindo suporte para drivers mais antigos, e estabilidade. Com base nestes argumentos e em sua pesquisa ele definiu o Linux Debian como o sistema operacional mais adequado.
	Depois de instalado e configurado o sistema operacional adequado para aplicação, foi realizado um estudo sobre as linguagens de programação web HTML (Hyper Text Markup Language) e php (Personal Hypertext Preprocessor). Para que houvesse a perfeita integração entre as chamadas de sistema para executar os comandos do iptables através da utilização do comando “system” da linguagem php, foi necessário a alteração dos arquivos de configuração do arquivo php.ini, presente no diretório /etc/php5/apache2/. Assim, foram configuradas como “ON” as variáveis globais “register_globals”, “allow_url_fopen” e “allow_url_include”. Também foi adicionado no arquivo /etc/sudoers as linhas “www-data ALL=NOPASSWD: ALL” e “user ALL=(ALL) ALL”, com a finalidade de dar permissão de execução dos comandos como super-usuário do sistema. Para salvar essas configurações ele utilizou um banco de dados MySQL todos os softwares em questão até o momento são open source de livre distribuição o que reforça a característica de baixo custo do artigo. Para manipular as bases de dados, foi utilizado o programa phpmyadmin. Outro recurso elaborado por ele é o agendamento de restrições de acesso, permitindo que usuário agende tarefas em uma determinada data. Este recurso é importante, pois possibilita que sejam realizadas alterações na configuração do firewall com agendamento prévio para que não necessite de alterações diárias e permita outros usuários usufruírem com mais liberdade da internet. Para que fosse possível ter essa funcionalidade ele utilizou uma aplicação chamada cron, é uma ferramenta que permite programar a execução de comandos e processos de acordo com as necessidades de horários dos usuários. As regras podem ser editadas no arquivo crontab, presente no diretório /etc/, onde os parâmetros seguem o seguinte formato: [minutos] [horas] [dias do mês] [mês] [dias da semana] [usuário] [comando].
	Para armazenar as informações de configurações do usuário, bem como para trazer informações sobre quais alterações já foram feitas no firewall, foram criadas quatro bases de dados, as quais foram identificadas como: “agendacron”, “iptables”, “login” e “regras”.
Por padrão, o sistema possui cadastrado um usuário administrador denominado “root”, com a senha “pass”. Os administradores podem ainda gerenciar os usuários, incluindo novos, ou excluindo usuários já cadastrados no sistema. Ao acessar a página das regras, é permitido ao usuário fazer o bloqueio de serviços, bem como a liberação dos serviços bloqueados, além do agendamento de tarefas. Também é possível o usuário solicitar informações atuais sobre suas configurações vigentes, clicando no botão responsável pelo serviço.
Ao clicar no link “Bloquear Serviços”, o usuário dará início à configuração do seu firewall. Nesta seção é possível que o usuário faça o bloqueio de sites, bem como de portas específicas na sua rede doméstica. Partindo do princípio que os usuários não terão conhecimentos sobre o que são as portas de comunicação em redes de computadores, e nem conhecimento sobre qual finalidade de cada uma, foi elaborada uma seção com todas as explicações pertinentes a este assunto. Ainda é possível fazer um bloqueio geral da rede, através de um botão específico, o qual simplifica os comandos “# iptables -P INPUT DROP” e “# iptables -P FORWARD DROP”.
Para o armazenamento das configurações realizadas pelo usuário, foi criada uma tabela na base de dados. Esta tabela, foi denominada como “iptables”. A tabela iptables é composta pelas seguintes entidades: “id”, “tabela”, “ordem”, “chain”, “protocolo”, “origem”, “destino”, “ação”, “site” e “portas”.
	A entidade “id” foi gerada com o intuito de criar identificadores para cada tipo de restrição realizada pelo usuário, pois será através da mesma que será realizada a consulta sobre as configurações vigentes do sistema. As entidades “tabela”, “ordem”, “chain”, “protocolo”, “origem”, “destino” e “ação” foram geradas exclusivamente para o armazenamento das regras, onde cada informação será armazenada de acordo com seus parâmetros nas regras do iptables que serão ativadas através da interface web. As entidades “site” e “portas” foram criadas com o intuito de facilitar o retorno de pesquisa sobre quais configurações estão vigentes no sistema, bem como informar de forma automatizada quais portas e quais sites estão bloqueados e poderão ser liberados pelo administrador do sistema e ainda é possível que o usuário exclua todas as regras ativas do seu firewall, através de um botão executando os comandos “#iptables -F”, “#iptables –P INPUT ACCEPT” e “#iptables –P FORWARD ACCEPT”.
	Ainda no ambiente das regras, é possível que o usuário faça o agendamento de restrição de acesso a sites específicos sendo necessário ser informado a hora, o minuto e o dia da semana em que a restrição deverá entrar em vigor, bem com a URL que deverá ser bloqueada, todas essas informações também ficaram salvas na tabela “agendacron” do banco de dados. Para mais detalhes de como foram implementadas essas regras de firewall deixarei o artigo em questão disponível como referência.
	Para o ambiente de testes para conferencia do resultado da proposta, foi utilizado um notebook como servidor da aplicação. O sistema operacional e a versão do SGBD utilizados para este teste foram os mesmos que os utilizados para a instalação do firewall no equipamento com hardware de baixo desempenho, e os testes foram realizados nas dependências do Colégio Técnico Industrial de Santa Maria. O equipamento servidor foi conectado à rede através da interface local eth0, e para compartilhamento de Internet foi criada uma interface virtual eth0:1. Para que houvesse o compartilhamento da rede, foi executado o comando “#echo 1 > /proc/sys/net/ipv4/ip_forward”. Já para o mascaramento de IP, foi realizado o comando “#iptables –t nat –A POSTROUTING –o eth0 –j MASQUERADE”. A interface eth0 estava configurada com um endereço de IP interno da UFSM, e para a interface eth0:1, foi configurado endereço, endereço 10.1.1.1/24. Como clientes, foram utilizados dois computadores de mesa, e um notebook. Os computadores de mesa receberam os endereços 10.1.1.5/24 e 10.1.1.6/24, e o notebook foi configurado com o endereço 10.1.1.7/24. Também foi necessário adicionar o equipamento servidor da aplicação como gateway default dos clientes, onde os mesmos precisaram executar o comando #route add default gw 10.1.1.1. Com a rede descrita funcionando, foram realizados diversos testes de comunicação, tais como SSH, FTP, TELNET, PING e TRACEROUTE (para verificar se os pacotes estavam sendo encaminhados pelo gateway). Todos os testes obtiveram êxito, então foi concluído que a comunicação entre todas as máquinas estava funcionando corretamente. Também foi utilizada a ferramenta Wireshark para fazer captura dos pacotes e garantir que as requisições estavam sendo enviadas corretamente para o servidor. Não deixe de conferir o trabalho dele pois está muito bem detalhado a forma como ele desenvolveu sua proposta e executou seu estudo.


Artigo de Referência:
http://www.redes.ufsm.br/docs/tccs/Anderson_Petry.pdf
autor do artigo:
Anderson Petry

